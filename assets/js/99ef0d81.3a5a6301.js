"use strict";(self.webpackChunkchenchens=self.webpackChunkchenchens||[]).push([[2046],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=s(n),u=a,v=m["".concat(c,".").concat(u)]||m[u]||p[u]||i;return n?r.createElement(v,o(o({ref:t},d),{},{components:n})):r.createElement(v,o({ref:t},d))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8241:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return d},default:function(){return m}});var r=n(3117),a=n(102),i=(n(7294),n(3905)),o=["components"],l={sidebar_position:4,id:"record_environment_variable",title:"Environment Variable in Node/React",tags:["Environment Variable","Node","React"]},c=void 0,s={unversionedId:"record/record_environment_variable",id:"record/record_environment_variable",title:"Environment Variable in Node/React",description:"\u60c5\u5883",source:"@site/docs/record/record_environment_variable.md",sourceDirName:"record",slug:"/record/record_environment_variable",permalink:"/chen-chens/myWebsite/docs/record/record_environment_variable",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/record/record_environment_variable.md",tags:[{label:"Environment Variable",permalink:"/chen-chens/myWebsite/docs/tags/environment-variable"},{label:"Node",permalink:"/chen-chens/myWebsite/docs/tags/node"},{label:"React",permalink:"/chen-chens/myWebsite/docs/tags/react"}],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,id:"record_environment_variable",title:"Environment Variable in Node/React",tags:["Environment Variable","Node","React"]},sidebar:"tutorialSidebar",previous:{title:"GraphQL client query record",permalink:"/chen-chens/myWebsite/docs/record/record_graphql"},next:{title:"Build a treeData by using recursive",permalink:"/chen-chens/myWebsite/docs/record/record_recursive_treeData"}},d=[{value:"\u60c5\u5883",id:"\u60c5\u5883",children:[{value:"\u932f\u8aa4\u5beb\u6cd51\uff1a",id:"\u932f\u8aa4\u5beb\u6cd51",children:[],level:3},{value:"\u932f\u8aa4\u5beb\u6cd52\uff1a",id:"\u932f\u8aa4\u5beb\u6cd52",children:[{value:"\u6703\u767c\u751f\u4ec0\u9ebc\u554f\u984c\uff1f",id:"\u6703\u767c\u751f\u4ec0\u9ebc\u554f\u984c",children:[],level:4}],level:3}],level:2},{value:"<code>node.js</code>\u74b0\u5883\u8b8a\u6578",id:"nodejs\u74b0\u5883\u8b8a\u6578",children:[],level:2},{value:"\u4ec0\u9ebc\u6642\u5019\u6703\u7528\u5230\u74b0\u5883\u8b8a\u6578\uff1f",id:"\u4ec0\u9ebc\u6642\u5019\u6703\u7528\u5230\u74b0\u5883\u8b8a\u6578",children:[],level:2},{value:"\u5be6\u4f5c\u89e3\u6cd5",id:"\u5be6\u4f5c\u89e3\u6cd5",children:[{value:"\u60f3\u6cd5\uff1a",id:"\u60f3\u6cd5",children:[],level:4}],level:2},{value:"\u53c3\u8003\u8cc7\u6e90",id:"\u53c3\u8003\u8cc7\u6e90",children:[],level:2}],p={toc:d};function m(e){var t=e.components,l=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"\u60c5\u5883"},"\u60c5\u5883"),(0,i.kt)("p",null,"\u4f7f\u7528 React \u4e32\u63a5 OPEN SOURCE API\uff0c\u9047\u5230 API \u63d0\u4f9b\u7684 secret key\uff0c\u767c\u73fe\u9047\u5230\u4ee5\u4e0b\u554f\u984c\uff1a"),(0,i.kt)("h3",{id:"\u932f\u8aa4\u5beb\u6cd51"},"\u932f\u8aa4\u5beb\u6cd51\uff1a"),(0,i.kt)("p",null,"\u4e4b\u524d\u9084\u4e0d\u77e5\u9053\u74b0\u5883\u8b8a\u6578\u9019\u6771\u897f\u6642\uff0c\u6211\u771f\u7684\u76f4\u63a5\u628a API secret key\u4e0a\u50b3\u5230 github\uff0c\u6536\u5230 github\u63d0\u9192:\n",(0,i.kt)("img",{alt:"record_problem_environment_variable",src:n(1210).Z})),(0,i.kt)("h3",{id:"\u932f\u8aa4\u5beb\u6cd52"},"\u932f\u8aa4\u5beb\u6cd52\uff1a"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u6211\u4f7f\u7528 React\u5efa\u7acb\u5c08\u6848"),(0,i.kt)("li",{parentName:"ol"},"\u5efa\u7acb file \u5b58\u53d6\u8b8a\u6578"),(0,i.kt)("li",{parentName:"ol"},"\u628a\u8a72 file \u653e\u9032 .gitignore\n\u539f\u672c\u60f3\u8aaa\u4e0d\u6703\u767c\u4f48\u5230 github\u5c31\u6c92\u4e8b\u4e86\uff0c\u7d50\u679c...")),(0,i.kt)("h4",{id:"\u6703\u767c\u751f\u4ec0\u9ebc\u554f\u984c"},"\u6703\u767c\u751f\u4ec0\u9ebc\u554f\u984c\uff1f"),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"WARNING: Do not store any secrets (such as private API keys) in your React app!"),(0,i.kt)("p",{parentName:"div"},"Environment variables are embedded into the build, meaning anyone can view them by inspecting your app's files."),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://create-react-app.dev/docs/adding-custom-environment-variables/#what-other-env-files-can-be-used"},"Adding Custom Environment Variables"))),(0,i.kt)("p",{parentName:"div"},"Unfortunately, keeping any key in your React client, even if you are using gitignore and an .env file, is not secure.\nYou should really only save API keys or secrets in your backend such as Node / Express. You can have your client send a request to your backend API, which can then make the actual API call with the API key and send the data back to your client."),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/48699820/how-do-i-hide-api-key-in-create-react-app"},"How do I hide API key in create-react-app?"))))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"nodejs\u74b0\u5883\u8b8a\u6578"},(0,i.kt)("inlineCode",{parentName:"h2"},"node.js"),"\u74b0\u5883\u8b8a\u6578"),(0,i.kt)("p",null,"(\u8349\u7a3f)"),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"node.js")," \u63d0\u4f9b:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"process"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"Node"),"\u4e00\u5168\u57df\u6027\u8b8a\u6578\u3002"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"process.env"),": \u56de\u50b3\u4e00\u500b\u5305\u542b\u7528\u6236\u74b0\u5883\u8cc7\u8a0a\u7684\u7269\u4ef6\uff0c\u4e5f\u5c31\u662f\b:\u7576\u524d\u5c08\u6848\u57f7\u884c\u74b0\u5883\u7684\u8cc7\u8a0a\u3002\u6211\u5011\u53ef\u4ee5\u4f9d\u7167\u4e0d\u540c\u74b0\u5883\uff0c\u5e36\u5165\u5c0d\u61c9\u7684\u8b8a\u6578\u8cc7\u6599\u3002")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"\u5728\u6839\u76ee\u9304\u5efa\u7acb\u4e0d\u540c\u6a94\u6848\uff0c\u4ee3\u8868\u4e0d\u540c\u74b0\u5883\u5c0d\u61c9:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".env"),": \u9ed8\u8a8d\u914d\u7f6e\u3002"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".env.dev"),": \u958b\u767c\u914d\u7f6e\u3002"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".env.prod"),": \u751f\u7522\u914d\u7f6e\u3002")),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},".env"),"\u5167\u7d00\u9304\u7684\u914d\u7f6e\u4e0d\u9069\u5408\u4e0a\u50b3\u81f3\u958b\u653e\u7a7a\u9593\uff0c\u6545\u6703\u653e\u7f6e\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},".gitignore"),"\uff0c\u8b93\u8cc7\u8a0a\u7559\u5728\u672c\u6a5f\u7aef\u3002\uff08\u63db\u53e5\u8a71\u8aaa\uff0c\u654f\u611f\u8cc7\u8a0a\u4e5f\u53ef\u4ee5\u900f\u904e\u9019\u6a23\u7684\u65b9\u5f0f\u9032\u884c\u4fdd\u8b77\uff09")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The environment variables allow you to store API keys and other configuration secrets independently from your main codebase and separate from your git repository so they never get checked in anywhere."),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.mickpatterson.com.au/blog/how-to-use-environment-variables-in-nodejs-with-express-and-dotenv/"},"How to use Environment Variables in NodeJs with Express and Dotenv"))))),(0,i.kt)("h2",{id:"\u4ec0\u9ebc\u6642\u5019\u6703\u7528\u5230\u74b0\u5883\u8b8a\u6578"},"\u4ec0\u9ebc\u6642\u5019\u6703\u7528\u5230\u74b0\u5883\u8b8a\u6578\uff1f"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u5c08\u6848\u6703\u6709 \u958b\u767c\u5340\\\u6e2c\u8a66\u5340\\\u7dda\u4e0a\u5340\uff0c\u53ef\u4ee5\u7528\u4f86\u5340\u5206\u74b0\u5883\u5c0d\u61c9\u7684\u74b0\u5883\u8b8a\u6578\u3002"),(0,i.kt)("li",{parentName:"ol"},"\u4f7f\u7528 \u74b0\u5883\u8b8a\u6578 \u7d71\u4e00\u53c3\u6578\u8a2d\u5b9a: \u4e0d\u540c\u74b0\u5883\u5c0d\u61c9\u4e0d\u540c \u8cc7\u6599\u5eab\u3001IP\u4f4d\u7f6e\u3001port\u3001\u5e33\u6236\u3001\u5bc6\u78bc\u7b49\u3002"),(0,i.kt)("li",{parentName:"ol"},"\u654f\u611f\u8cc7\u8a0a\u3001\u4e0d\u5f97\u5916\u6d41\u7684\u8cc7\u6599: API secret key")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"\u5be6\u4f5c\u89e3\u6cd5"},"\u5be6\u4f5c\u89e3\u6cd5"),(0,i.kt)("h4",{id:"\u60f3\u6cd5"},"\u60f3\u6cd5\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5c07 API secret key \u5b58\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},".env")," file"),(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528 express.js \u5efa\u7acb server\uff0c\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"li"},"process.env.\u8b8a\u6578")," \u53d6\u5f97\u8cc7\u6599 (Sever-side)"),(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528 express \u5efa\u7acb API\uff0c\u6210\u529f\u56de\u50b3\u5c31\u50b3\u9001 ",(0,i.kt)("inlineCode",{parentName:"li"},"process.env.\u8b8a\u6578")," "),(0,i.kt)("li",{parentName:"ul"},"client-side \u900f\u904e call api \u53d6\u5f97 API secret key (Client-side)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".env")," file \u653e\u7f6e\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},".gitignore"),"\uff0c\u907f\u514d\u4e0a\u50b3\u66dd\u5149 ")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"install dotenv package"),(0,i.kt)("li",{parentName:"ol"},"build ",(0,i.kt)("inlineCode",{parentName:"li"},".env")," file in the root"),(0,i.kt)("li",{parentName:"ol"},"write something {varible}..."),(0,i.kt)("li",{parentName:"ol"},'require("dotenv").config()'),(0,i.kt)("li",{parentName:"ol"},"use ",(0,i.kt)("inlineCode",{parentName:"li"},"process.env.{varible}")," to get value which in the ",(0,i.kt)("inlineCode",{parentName:"li"},".env")," file record")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"\u53c3\u8003\u8cc7\u6e90"},"\u53c3\u8003\u8cc7\u6e90"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nodejs.org/api/process.html#processenv"},"process.env")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://create-react-app.dev/docs/adding-custom-environment-variables"},"Adding Custom Environment Variables")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://medium.com/@ai.ashkan9473/environment-variables-in-client-side-6a6ff51c6085"},"Environment Variables in Client-Side")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://forum.freecodecamp.org/t/how-to-access-env-variables-from-client-side-js/331308"},"How to access .env variables from client side JS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://medium.com/%E9%BA%A5%E5%85%8B%E7%9A%84%E5%8D%8A%E8%B7%AF%E5%87%BA%E5%AE%B6%E7%AD%86%E8%A8%98/%E7%AD%86%E8%A8%98-%E8%AA%8D%E8%AD%98-oauth-2-0-%E4%B8%80%E6%AC%A1%E4%BA%86%E8%A7%A3%E5%90%84%E8%A7%92%E8%89%B2-%E5%90%84%E9%A1%9E%E5%9E%8B%E6%B5%81%E7%A8%8B%E7%9A%84%E5%B7%AE%E7%95%B0-c42da83a6015"},"[\u7b46\u8a18] \u8a8d\u8b58 OAuth 2.0\uff1a\u4e00\u6b21\u4e86\u89e3\u5404\u89d2\u8272\u3001\u5404\u985e\u578b\u6d41\u7a0b\u7684\u5dee\u7570"))))}m.isMDXComponent=!0},1210:function(e,t,n){t.Z=n.p+"assets/images/record_problem_environment_variable-7704a75550b7de6c157c8869a7c893ca.png"}}]);