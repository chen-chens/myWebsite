<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Async or Sync jwt.verify() ? | Chen Huei Jen</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://github.com/myWebsite/docs/record/record_jwt_verify"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Async or Sync jwt.verify() ? | Chen Huei Jen"><meta data-react-helmet="true" name="description" content="jwt.verify(token, secretOrPublicKey, [options, callback])"><meta data-react-helmet="true" property="og:description" content="jwt.verify(token, secretOrPublicKey, [options, callback])"><link data-react-helmet="true" rel="icon" href="/myWebsite/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/myWebsite/docs/record/record_jwt_verify"><link data-react-helmet="true" rel="alternate" href="https://github.com/myWebsite/docs/record/record_jwt_verify" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/myWebsite/docs/record/record_jwt_verify" hreflang="x-default"><link rel="stylesheet" href="/myWebsite/assets/css/styles.cd7e3ed1.css">
<link rel="preload" href="/myWebsite/assets/js/runtime~main.3e457021.js" as="script">
<link rel="preload" href="/myWebsite/assets/js/main.7018efe2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/myWebsite/"><b class="navbar__title">Huei Jen Chen</b></a><a class="navbar__item navbar__link navbar__link--active" href="/myWebsite/docs/git/git_intro">Tech Notes</a></div><div class="navbar__items navbar__items--right"><a href="https://line.me/ti/p/iY942GaUzk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Line<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.linkedin.com/in/huei-jen-chen" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/chen-chens" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ğŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ğŸŒ</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/git/git_intro">ï¼ŠGit &amp; GitHub</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/rwd/box_sizing">ï¼ŠRWD</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/javascript/js_primative">ï¼ŠJavaScript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/react/react_intro">ï¼ŠReact</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/redux/redux_intro">ï¼ŠRedux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/typescript/ts_intro">ï¼ŠTypescript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/node/node_intro">ï¼ŠNode</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/next/next_intro">ï¼ŠNext</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/seo/seo_keyword">ï¼ŠSEO</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/leetCode/LeetCode_Easy_Part">ï¼ŠLeetCode</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/myWebsite/docs/record/problem_record1">ï¼Šå·¥ä½œç´€éŒ„</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/problem_record1">Performance Issue when fetching large Data from server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/problem_record2">async-await vs promise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_graphql">GraphQL client query record</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_environment_variable">Environment Variable in Node/React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_recursive_treeData">Build a treeData by using recursive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_URL_to_website">What happens when I click the URL?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_dragAndDrop">react-beautiful-dnd Record</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_sort_mutiple_conditions">sort by multiple conditions w/ flexible way</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_moment_calc_item">How to use moment.js to calc. time?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_parse_url">How to parse url?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_searchInput_live_call_api">How to prevent search input from calling too much request?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_react_reRender_solution">How to reduce React unnecessary re-render?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_email_parsed_domain_name">How to exact domain name from email?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/run_local_project">Run project on local</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_local_node_version_broken_project">Project breaks when uploading Node.js version</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_useEffect_render_order">useEffect render Order</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_next_route_append_twice">Next.js Router Issue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_typescript_api_error">Why try/catch error type</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_next_getStaticPaths_cant_receive_query_params">Can&#x27;t receive router query params by using getStaticPaths()</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_next_eslint_prettier_husky">Next.js Project with, Airbnb Eslint Style , Prettier, and Husky setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/myWebsite/docs/record/record_token">Where to get or set token ?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/myWebsite/docs/record/record_jwt_verify">Async or Sync jwt.verify() ?</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/sql/intro">ï¼ŠSQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/terminal/list">ï¼ŠTerminal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/mongoDB/mongoDB_collections_connection">ï¼ŠMongoDB</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/googleService/google_gmail">ï¼ŠGoogle Service</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/reactNative/react_native_intro">ï¼ŠReact Native</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/myWebsite/docs/testing/testing_intro">ï¼ŠTesting</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Async or Sync jwt.verify() ?</h1></header><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><code>jwt.verify(token, secretOrPublicKey, [options, callback])</code></p><p>(Asynchronous) If a callback is supplied, function acts asynchronously. The callback is called with the decoded payload if the signature is valid and optional expiration, audience, or issuer are valid. If not, it will be called with the error.</p><p>(Synchronous) If a callback is not supplied, function acts synchronously. Returns the payload decoded if the signature is valid and optional expiration, audience, or issuer are valid. If not, it will throw the error.</p><ul><li><a href="https://github.com/auth0/node-jsonwebtoken" target="_blank" rel="noopener noreferrer">GitHub: node-jsonwebtoken</a></li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="åŒæ­¥å¯«æ³•">åŒæ­¥å¯«æ³•ï¼š<a class="hash-link" href="#åŒæ­¥å¯«æ³•" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">verifyToken</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> Request</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> Response</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> next</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> NextFunction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> decode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> jwt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">verify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">JWT_SECRET_KEY</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;VerifyToken Fail: &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="éåŒæ­¥å¯«æ³•">éåŒæ­¥å¯«æ³•ï¼š<a class="hash-link" href="#éåŒæ­¥å¯«æ³•" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_K1bP language-js theme-code-block"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">verifyToken</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> Request</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> Response</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> next</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> NextFunction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> jwt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">verify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">JWT_SECRET_KEY</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> decoded</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;VerifyToken Fail: &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="q-ä½¿ç”¨åŒæ­¥-èˆ‡-éåŒæ­¥-å¯«æ³•å·®ç•°">Q: ä½¿ç”¨åŒæ­¥ èˆ‡ éåŒæ­¥ å¯«æ³•å·®ç•°ï¼Ÿ<a class="hash-link" href="#q-ä½¿ç”¨åŒæ­¥-èˆ‡-éåŒæ­¥-å¯«æ³•å·®ç•°" title="Direct link to heading">â€‹</a></h3><p>æ ¹æ“š ChatGPT å›è¦†ï¼š</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">ä½¿ç”¨åŒæ­¥æˆ–ç•°æ­¥æ–¹å¼èª¿ç”¨ jwt.verify() æ–¹æ³•ä¸»è¦å€åˆ¥åœ¨æ–¼ç¨‹å¼ç¢¼çš„é‹è¡Œæ–¹å¼å’ŒéŒ¯èª¤è™•ç†æ–¹å¼ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ä½¿ç”¨åŒæ­¥æ–¹å¼èª¿ç”¨ jwt.verify() æ–¹æ³•ï¼Œç•¶ JWT è§£æå¤±æ•—æ™‚æœƒæ‹‹å‡ºéŒ¯èª¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ try-catch å¡Šè™•ç†é€™äº›éŒ¯èª¤ï¼Œé€™æ¨£å¯ä»¥è®“ä»£ç¢¼æ›´åŠ ç°¡æ½”æ˜ç­ã€‚ä½†æ˜¯ï¼Œå¦‚æœ JWT å¾ˆå¤§æˆ–è€…å¯†é‘°å¾ˆè¤‡é›œï¼ŒåŒæ­¥æ–¹å¼çš„é‹è¡Œé€Ÿåº¦å¯èƒ½æœƒæ¯”è¼ƒæ…¢ï¼Œè€Œä¸”ç•¶è§£æè€—æ™‚å¾ˆé•·æ™‚ï¼Œç¨‹å¼æœƒé˜»å¡åœ¨é€™è£¡ï¼Œå½±éŸ¿æ•´å€‹æ‡‰ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ä½¿ç”¨ç•°æ­¥æ–¹å¼èª¿ç”¨ jwt.verify() æ–¹æ³•ï¼Œä½ éœ€è¦ä½¿ç”¨å›èª¿å‡½æ•¸ä¾†è™•ç†è§£ææˆåŠŸæˆ–å¤±æ•—çš„æƒ…æ³ã€‚é€™ç¨®æ–¹å¼é©ç”¨æ–¼éœ€è¦è§£æå¤§é‡ JWT æˆ–è€…å¯†é‘°å¾ˆè¤‡é›œçš„æƒ…æ³ã€‚ç•¶è§£æ JWT éœ€è¦è¼ƒé•·æ™‚é–“æ™‚ï¼Œç•°æ­¥æ–¹å¼å¯ä»¥é¿å…é˜»å¡æ•´å€‹æ‡‰ç”¨ç¨‹åºçš„é‹è¡Œã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ç•°æ­¥æ–¹å¼éœ€è¦æ›´å¤šçš„ä»£ç¢¼ï¼Œéœ€è¦åœ¨å›èª¿å‡½æ•¸ä¸­è™•ç†éŒ¯èª¤ï¼Œä»£ç¢¼æ¯”è¼ƒå†—é•·ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ç¸½çš„ä¾†èªªï¼Œä½¿ç”¨åŒæ­¥æˆ–ç•°æ­¥æ–¹å¼èª¿ç”¨ jwt.verify() æ–¹æ³•ï¼Œä¸»è¦æ˜¯æ ¹æ“šæ‡‰ç”¨ç¨‹åºçš„éœ€æ±‚å’Œæ€§èƒ½è¦æ±‚é€²è¡Œé¸æ“‡ã€‚å¦‚æœéœ€è¦è§£æå¤§é‡ JWT æˆ–è€…å¯†é‘°å¾ˆè¤‡é›œï¼Œå¯ä»¥ä½¿ç”¨ç•°æ­¥æ–¹å¼ã€‚å¦‚æœéœ€è¦ä»£ç¢¼ç°¡æ½”æ˜ç­ï¼Œå¯ä»¥ä½¿ç”¨åŒæ­¥æ–¹å¼ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="q-ç•°æ­¥-æœ¬èº«å°±æ˜¯-promise-å—-é‚„æ˜¯ä¸æ˜¯">Q: ç•°æ­¥ æœ¬èº«å°±æ˜¯ Promise å—ï¼Ÿ é‚„æ˜¯ä¸æ˜¯ï¼Ÿ<a class="hash-link" href="#q-ç•°æ­¥-æœ¬èº«å°±æ˜¯-promise-å—-é‚„æ˜¯ä¸æ˜¯" title="Direct link to heading">â€‹</a></h3><p>æ ¹æ“š ChatGPT å›è¦†ï¼š</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">ç•°æ­¥å’Œ Promise ä¸æ˜¯å®Œå…¨ç›¸åŒçš„æ¦‚å¿µã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ç•°æ­¥æ˜¯ä¸€ç¨®ç¨‹å¼åŸ·è¡Œçš„æ–¹å¼ï¼Œç•¶é‡åˆ°éœ€è¦è€—æ™‚æ“ä½œæ™‚ï¼Œç¨‹å¼ä¸æœƒç­‰å¾…æ“ä½œå®Œæˆå†ç¹¼çºŒåŸ·è¡Œï¼Œè€Œæ˜¯å…ˆæŠŠæ“ä½œäº¤çµ¦å…¶ä»–åŸ·è¡Œç·’æˆ–äº‹ä»¶å¾ªç’°ï¼Œè®“ç¨‹å¼å¯ä»¥ç¹¼çºŒåŸ·è¡Œä¸‹å»ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Promise å‰‡æ˜¯ä¸€ç¨®è™•ç†ç•°æ­¥æ“ä½œçš„æ–¹å¼ï¼Œå®ƒæä¾›äº†ä¸€å€‹å¯ä»¥ç­‰å¾…ç•°æ­¥æ“ä½œå®Œæˆçš„æ©Ÿåˆ¶ï¼Œä½¿å¾—ç¨‹å¼å¯ä»¥åœ¨æ“ä½œå®Œæˆå¾Œç¹¼çºŒåŸ·è¡Œã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ç•¶æˆ‘å€‘ä½¿ç”¨ async/await èªæ³•æ™‚ï¼Œå¯¦éš›ä¸Šæ˜¯æŠŠç•°æ­¥æ“ä½œåŒ…è£æˆ Promise çš„å½¢å¼ï¼Œè®“æˆ‘å€‘å¯ä»¥åƒä½¿ç”¨åŒæ­¥æ“ä½œä¸€æ¨£åœ°ç·¨å¯«ç¨‹å¼ç¢¼ï¼Œä½†é€™ä¸¦ä¸ä»£è¡¨ç•°æ­¥å°±æ˜¯ Promiseã€‚åœ¨ JavaScript ä¸­ï¼Œç•°æ­¥æ“ä½œå¯ä»¥é€šéå¤šç¨®æ–¹å¼å¯¦ç¾ï¼Œä¾‹å¦‚ callbackã€äº‹ä»¶ã€Promiseã€Generatorã€async/await ç­‰ç­‰ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/myWebsite/docs/tags/node-js">Node.js</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/myWebsite/docs/tags/token">token</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/myWebsite/docs/tags/jwt">jwt</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/record/record_jwt_verify.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/myWebsite/docs/record/record_token"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Where to get or set token ?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/myWebsite/docs/sql/intro"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SQL Foundations</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#åŒæ­¥å¯«æ³•" class="table-of-contents__link toc-highlight">åŒæ­¥å¯«æ³•ï¼š</a></li><li><a href="#éåŒæ­¥å¯«æ³•" class="table-of-contents__link toc-highlight">éåŒæ­¥å¯«æ³•ï¼š</a></li><li><a href="#q-ä½¿ç”¨åŒæ­¥-èˆ‡-éåŒæ­¥-å¯«æ³•å·®ç•°" class="table-of-contents__link toc-highlight">Q: ä½¿ç”¨åŒæ­¥ èˆ‡ éåŒæ­¥ å¯«æ³•å·®ç•°ï¼Ÿ</a></li><li><a href="#q-ç•°æ­¥-æœ¬èº«å°±æ˜¯-promise-å—-é‚„æ˜¯ä¸æ˜¯" class="table-of-contents__link toc-highlight">Q: ç•°æ­¥ æœ¬èº«å°±æ˜¯ Promise å—ï¼Ÿ é‚„æ˜¯ä¸æ˜¯ï¼Ÿ</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/myWebsite/assets/js/runtime~main.3e457021.js"></script>
<script src="/myWebsite/assets/js/main.7018efe2.js"></script>
</body>
</html>